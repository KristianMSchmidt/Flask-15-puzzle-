{% extends 'base.html' %}
{% block title %}8 puzzle{% endblock title%}
{% block body %}

{{data["puzzle_type"]}}
<div class="title-area">
    {% if data["puzzle_dim"] == 3 %}
        <h1>8-puzzle</h1>
    {% else %}
        <h1>15-puzzle</h1>
    {% endif %}
    <h4>Try the automatic solver or solve the puzzle yourself (use arrow keys)</h4>
    <input type="button" id="new_sample_btn" value="New Sample Puzzle">
    <input type="button" id="make_custom_btn" value="Make Custom Puzzle"><br>   
    <br>  
    <a id="change_puzzle_dim_link" href="#">
        {% if data["puzzle_dim"] == 3 %}
            Try 15-puzzle?
        {% else %}
            Back to 8-puzzle
        {% endif %}
    </a>
</div>

<div class="horizontal-flex-container">
    <div class="vertical-flex-container game-area">
        <h3>Computer</h3>
        <p id="ai_title">{{data["puzzle_title"]}}</p>
        <div class="board dim{{data["puzzle_dim"]}}">
            {% for i in range(data["puzzle_dim"]) %}
                {% for j in range(data["puzzle_dim"]) %}
                    <div id="ai{{i|string}}{{j|string}}"></div>
                {% endfor %}
            {% endfor %}
        </div>
        <p id="ai_move_count">#Moves: 0</p> 
        <p id="ai_status">
            {% if data["ai_puzzle_is_solved"] %}
                Solved!
            {% else %}
                Not solved yet
            {% endif %}
        </p>
        {% if not data["ai_solution_computed"] %}
            <input type="button" id="solve_btn" value="Solve">
        {% else %}
            <input type="button" id="reset_btn" value="Reset Sample">    
        {% endif %}
       
    </div>  
    <div class="vertical-flex-container info">
        {% if not data["ai_solution_computed"] %}
            <h4>Select algorithm</h4>
            <br>
            <label for="ast_alt" class="radiolabel">A*-search (Manhattan)</label>
            <input type="radio" class="selector" id="ast_alt" name="search_type"  value="ast_alt">
            <label for="gbfs class="radiolabel">Gready best-first search</label>
            <input type="radio" class="selector" id="gbfs" name="search_type"  value="gbfs">
            <label for="bfs" class="radiolabel">Breadth-first search</label>
            <input type="radio" class="selector" id="bfs" name="search_type"  value="bfs">
            <label for="dfs" class="radiolabel">Depth-first search</label>
            <input type="radio" class="selector" id="dfs" name="search_type" value="dfs">
        {% else %}
            <h4>Solution details</h4>
            <p class="h6">Basics:</p>
            <p id="solution-method"></p>   
            <p>#Moves in solution:
                <a href={{url_for('show_solution_string', ai_solution_string=data['ai_solution_string'])}}>
                {{data["ai_num_solution_steps"]}}</a>
            </p> 
            <p>Running time: {{data["running_time"]}}s</p>
            <p class="h6">Nerd stuff:</p>
            <p>Max search depth: {{data["max_search_depth"]}}</p> 
            <p>Max Ram Usage: {{data["max_ram_usage"]}}MB</p>   
            <p>#Expanded nodes: {{data["num_expanded_nodes"]}}</p> 
        {% endif %}
    </div> 
    <div class="vertical-flex-container game-area" id="human-board">
        <h3>You</h3>
        <p>{{data["puzzle_title"]}}</p>
        <div class="board dim{{data["puzzle_dim"]}}">
            {% for i in range(data["puzzle_dim"]) %}
                {% for j in range(data["puzzle_dim"]) %}
                    <div id="human{{i|string}}{{j|string}}"></div>
                {% endfor %}
            {% endfor %}
        </div>
        <p id="human_move_count">#Moves: {{data["human_move_count"]}}</p> 
        <p id="human_status">
            {% if data["human_puzzle_is_solved"] %}
                Solved!
            {% else %}
                Not solved yet
            {% endif %}
        </p>
        {% if data["puzzle_type"] == "sample" %}
            <input type="button" id="help_btn" value="Need help?">
        {% endif %}

    </div> 
    {% if data["requested_action"] == "help" %}
        {% include 'help.html' %}
    {% endif %}
</div>

<script>js_data = JSON.parse('{{ data | tojson | safe}}')</script>  
<script src="../static/js/eventlisteners.js"></script>
<script src="../static/js/render_puzzle.js"></script>
<script src= "../static/js/main.js"></script>

{% endblock body %}