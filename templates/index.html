{% extends 'base.html' %}
{% block title %}8 puzzle{% endblock title%}
{% block body %}

<div class="title-area">
    {% if data["puzzle_dim"] == 3 %}
        <h1>8-puzzle</h1>
    {% else %}
        <h1>15-puzzle</h1>
    {% endif %}
    <h4>Try the automatic solver or solve the puzzle yourself</h4>
    <input type="button" id="new_sample_btn" value="New Sample">
    <input type="button" id="make_custom_btn" value="Custom Puzzle">
    <br>
    <a id="change_puzzle_dim_link" href="#">
        {% if data["puzzle_dim"] == 3 %}
            Try 15-puzzle?
        {% else %}
            Back to 8-puzzle
        {% endif %}
    </a>
</div>

<div class="horizontal-flex-container">
    <div class="vertical-flex-container info">
        <h4>Solution algorithm</h4>
        <br>        
        {% for search_type in data["all_search_types"] %}
            <label for="{{search_type}}" class="radiolabel">{{data["search_names"][search_type]}}</label>
            <input type="radio" class="selector" id="{{search_type}}" name="search_type" value="{{search_type}}">
        {% endfor %}        
    </div>
    <div class="vertical-flex-container game-area">
        <h3 id="title">{{data["puzzle_title"]}}</h3>
        <p>&nbsp;</p>
        <div class="board dim{{data["puzzle_dim"]}}" id="board">
            {% for i in range(data["puzzle_dim"]) %}
                {% for j in range(data["puzzle_dim"]) %}
                    <div id="tile{{i|string}}{{j|string}}"></div>
                {% endfor %}
            {% endfor %}
        </div>
        <p id="move_count">#Moves: {{data["move_count"]}}</p> 
        <p id="status">
            {% if data["puzzle_is_solved"] %}
                Solved!
            {% else %}
                Not solved yet
            {% endif %}
        </p>
        <input type="button" id="solve_reset_btn" value="{{data["solve_or_reset_btn_value"]}}">
    </div> 
    {% if data["show_solution_details"] %}
        <div class="vertical-flex-container info">
            <h4>Solution details</h4>
            <p class="h6">Basics:</p>
            <p id="solution-method"></p>   
            <p>#Moves in solution:
                <a href={{url_for('show_solution_string', solution_string=data['solution_string'])}}>
                {{data["num_solution_steps"]}}</a>
            </p> 
            <p>Running time: {{data["running_time"]}}s</p>
            <p class="h6">Nerd stuff:</p>
            <p>Max search depth: {{data["max_search_depth"]}}</p> 
            <p>Max Ram Usage: {{data["max_ram_usage"]}}MB</p>   
            <p>#Expanded nodes: {{data["num_expanded_nodes"]}}</p> 
        </div> 
    {% else %}
    <div class="vertical-flex-container info" id="help-area">
        <h4>What to do?</h4>
        {% if data["puzzle_type"] == "sample" %}
            <p>Use arrow keys to uptain </p>
            <p>the goal state: </p>
            <br>
            <p> [0, 1, 2] </p>
            <p> [3, 4, 5] </p>
            <p> [6, 7, 8] </p>
            <br>
            <p> Or try the automatic solver</p>
            <p> with your preferred algorithm.</p>
        {% else %}
            <p>Create a puzzle yourself by</p>
            <p>messing up the solved puzzle</p>
            <p>(use arrow keys).</p>
            <br>
            <p>Solve it with your</p>
            <p>preferred algorithm.</p>
        {% endif %}
    </div>
    {% endif %}
</div>

<form method="post" action="{{ url_for('index') }}" id="form">
    <input type="hidden" name="json_data" id="json_data" value = "">
</form>

<script>js_data = JSON.parse('{{ data | tojson | safe}}')</script>  
<script src="../static/js/eventlisteners.js"></script>
<script src="../static/js/render_puzzle.js"></script>
<script src= "../static/js/main.js"></script>

{% endblock body %}